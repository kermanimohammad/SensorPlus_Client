:root{
  --panel-bg: rgba(12,16,28,0.78);
  --panel-bd: rgba(255,255,255,0.12);
  --chip-bg: rgba(0,0,0,0.55);
  --accent: #6ee7b7;
  --accent-2: #60a5fa;
  --text: #e5e7eb;
  --muted: #9ca3af;
  --hover: rgba(255,255,255,0.08);
}

*{box-sizing:border-box}
html,body,#app,#renderCanvas{height:100%;width:100%;margin:0;padding:0}
body{
  overflow:hidden;background:#0a0e1a;color:var(--text);
  font:14px/1.4 system-ui,-apple-system,Segoe UI,Roboto,Arial
}

/* Drawer */
.drawer{
  position:fixed;right:12px;top:12px;bottom:12px;z-index:25;
  width:360px;max-width:calc(100% - 24px);
  display:grid;grid-template-rows:auto auto auto 1fr auto;
  background:var(--panel-bg);border:1px solid var(--panel-bd);
  border-radius:14px;backdrop-filter:blur(10px);
  transform:translateX(0);transition:transform .25s ease,opacity .2s ease;
}
.drawer.collapsed{transform:translateX(calc(100% + 12px));opacity:.98;pointer-events:none}

.drawer-header{
  display:flex;align-items:center;justify-content:space-between;
  padding:8px 10px;border-bottom:1px solid var(--panel-bd)
}
.drawer-title{font-weight:600;letter-spacing:.2px}

.status-line{display:flex;align-items:center;gap:8px;font-size:12px;color:var(--muted);padding:6px 10px}
.dot{width:8px;height:8px;border-radius:50%;background:#ef4444;box-shadow:0 0 12px rgba(239,68,68,.7)}
.dot.ok{background:#10b981;box-shadow:0 0 12px rgba(16,185,129,.7)}
code{color:var(--accent-2);background:rgba(255,255,255,.06);padding:2px 6px;border-radius:6px}

/* Tabs */
.tabs{display:flex;gap:6px;padding:6px 8px;border-bottom:1px solid var(--panel-bd)}
.tab{padding:6px 8px;border-radius:10px;cursor:pointer;color:var(--muted);user-select:none}
.tab.active{background:var(--hover);color:var(--text)}

/* Panels */
.panel{display:none;padding:6px 10px 14px;overflow:auto}
.panel.active{display:block}

/* Group - کارت گرافیکی */
.group{
  border:1px solid var(--panel-bd);
  background: radial-gradient(120% 120% at 10% 0%, rgba(255,255,255,.06), rgba(255,255,255,.03));
  border-radius:14px;
  padding:12px;
  margin:12px 0 0;
  box-shadow: 0 10px 24px rgba(0,0,0,.22) inset, 0 8px 24px rgba(0,0,0,.18);
}
.group-head{
  display:flex; align-items:center; gap:10px; margin-bottom:8px;
}
.head-icon{
  width:30px;height:30px;border-radius:8px;
  background: linear-gradient(135deg,#e2e8f0 0%, #cbd5e1 100%);
  display:flex; align-items:center; justify-content:center;
}
.head-icon img{ width:18px; height:18px; filter: invert(0); }
.head-title .t1{ font-weight:800; letter-spacing:.2px; }
.head-title .t2{ font-size:12px; color:#9fb1c2; }

/* Divider در کارت Project */
.partition{ height:1px; background:linear-gradient(90deg,transparent,#334155,transparent); margin:8px 0 0 }

/* فرم‌ها */
.row{display:grid;grid-template-columns:1fr;gap:6px;margin:6px 0 0}
.row.inline{grid-template-columns:1fr 1fr;gap:8px}
label{color:var(--muted);font-size:12px}

input[type="text"],input[type="number"],input[type="password"],select{
  width:100%;padding:10px 12px;border-radius:10px;border:1px solid var(--panel-bd);
  background:rgba(255,255,255,.10);color:var(--text);outline:none;font-weight:600
}
input[type="text"]:focus,input[type="number"]:focus,input[type="password"]:focus,select:focus{
  border-color:var(--accent-2);box-shadow:0 0 0 2px rgba(96,165,250,.25)
}
input[type="color"]{
  width:100%;height:40px;padding:3px;border-radius:10px;border:1px solid var(--panel-bd);
  background:rgba(255,255,255,.05)
}
#catalog{font-weight:700;letter-spacing:.2px;background:rgba(255,255,255,.14)}

/* انتخاب + دکمه در یک خط */
.select-line{ display:grid; grid-template-columns: 1fr auto; gap:8px; }

/* دکمه‌ها */
.btn{
  padding:10px 12px;border-radius:12px;border:1px solid var(--panel-bd);
  background:rgba(255,255,255,0.85);color:#111;cursor:pointer;
  display:inline-flex;align-items:center;gap:8px;transition:background .15s ease, transform .15s ease
}
.btn:hover{background:#fff; transform: translateY(-1px); }
.btn.primary{
  border-color:transparent;
  background:linear-gradient(135deg,#dbeafe 0%,#bfdbfe 100%);color:#111;font-weight:700
}
.btn.solid{
  background:#e2e8f0; color:#111; border-color: transparent; font-weight:700;
}
.btn.full{ width:100%; }
.btn.ghost{background:transparent;color:var(--text)}

.fileline{display:flex;align-items:center;gap:8px;margin-top:6px;color:var(--muted)}

/* آپلودر گرافیکی */
.file-uploader{
  display:flex; align-items:center; gap:10px;
  border:1px dashed #334155; background:rgba(255,255,255,.06);
  border-radius:12px; padding:8px 10px;
}
.file-uploader input[type="file"]{ display:none; }
.file-uploader .file-chip{
  padding:8px 10px; border-radius:10px;
  background:#e2e8f0; color:#111; font-weight:700; cursor:pointer; user-select:none;
}
.file-uploader .file-name{ color:#93a4b8; font-size:12px; }

/* Icon buttons (Tools) */
.icon-btn{
  width:36px;height:36px;border-radius:10px;border:1px solid var(--panel-bd);
  background:rgba(255,255,255,0.9);color:#111;
  display:inline-flex;align-items:center;justify-content:center;
  cursor:pointer;transition:background .15s ease, transform .15s ease
}
.icon-btn:hover{ background:#fff; transform:translateY(-1px); }
.icon-btn:active{ transform:translateY(0); }
.icon-btn.primary{ border-color:transparent; background:#bfdbfe; color:#111; }
.icon-btn.danger { border-color:#fecaca; background:#fee2e2; color:#b91c1c; }
.icon{ width:18px; height:18px; display:inline-block; }
.btn .icon{ vertical-align:-2px; }

/* لیست دستگاه‌ها */
.list{
  border:1px solid var(--panel-bd);background:rgba(255,255,255,.04);
  border-radius:10px;padding:6px;min-height:40px;max-height:160px;overflow:auto;
  font-family:ui-monospace,Menlo,Consolas,monospace;font-size:12px
}
.list .chip{
  display:inline-block;margin:4px 6px 0 0;padding:4px 8px;border-radius:999px;
  background:rgba(0,0,0,.35);border:1px solid var(--panel-bd);color:var(--text)
}

/* Drawer footer */
.drawer-footer{
  padding:8px 10px;border-top:1px solid var(--panel-bd);
  display:flex;justify-content:space-between;align-items:center;
  font-size:12px;color:var(--muted)
}
.footer-broker code{margin-left:6px}

/* Floating open button */
.floating-open{
  position:fixed;left:12px;top:12px;z-index:30;
  background:rgba(255,255,255,0.9);border:1px solid var(--panel-bd);
  padding:0;border-radius:999px;color:#111;cursor:pointer;
  display:inline-flex;align-items:center;justify-content:center;
  width:40px;height:40px;transition:background .15s ease
}
.floating-open:hover{ background:#fff; }

/* Tools dock (always on top) */
.tools-dock{
  position: fixed;
  left: 12px;
  top: 50%;
  transform: translateY(-50%);
  z-index: 10000;
  display: flex;
  flex-direction: column;
  gap: 10px;
  padding: 8px;
  border-radius: 14px;
  border: 1px solid var(--panel-bd);
  background: rgba(255,255,255,.9);
  backdrop-filter: blur(8px);
  pointer-events: auto;
}
/* Tools dock horizontal */
.tools-dock.horizontal {
  position: fixed;
  top: 12px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 10000;
  display: flex;
  flex-direction: row;       /* ⬅ افقی */
  gap: 10px;
  padding: 8px 12px;
  border-radius: 14px;
  border: 1px solid var(--panel-bd);
  background: rgba(255,255,255,.9);
  backdrop-filter: blur(8px);
  pointer-events: auto;
}
/* Icon buttons (Tools) — unified look + active state */
.icon-btn{
  width:36px;height:36px;border-radius:10px;
  border:1px solid #cbd5e1;               /* مرز ملایم */
  background:#e2e8f0;                      /* همه هم‌رنگ */
  color:#111;
  display:inline-flex;align-items:center;justify-content:center;
  cursor:pointer;
  transition:background .15s ease, transform .15s ease, box-shadow .15s ease, border-color .15s ease;
}
.icon-btn .icon{ width:18px; height:18px; }

.icon-btn:hover{
  background:#f1f5f9;
  transform: translateY(-1px);
}

/* حالت فعال: رنگ متمایز + حلقهٔ ظریف */
.icon-btn[aria-pressed="true"]{
  background: linear-gradient(135deg,#dbeafe 0%, #bfdbfe 100%); /* آبی روشن */
  border-color:#93c5fd;
  box-shadow: 0 0 0 2px rgba(147,197,253,.35) inset;
}

/* حالت فوکوس کیبورد (دسترسی بهتر) */
.icon-btn:focus-visible{
  outline: none;
  box-shadow: 0 0 0 3px rgba(147,197,253,.45);
}

/* حالت فعالِ همزمان با hover کمی برجسته‌تر شود (اختیاری) */
.icon-btn[aria-pressed="true"]:hover{
  background: linear-gradient(135deg,#cae3ff 0%, #b5d7ff 100%);
}

/* App host */
#app{position:relative;z-index:1}
